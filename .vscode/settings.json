{
  // Automatically restart all the other extensions after loading the direnv
  // environment. This way the other extensions will have the environment as
  // well.
  "direnv.restart.automatic": true,

  // Don't reload the direnv environment when .envrc changes. When direnv
  // reloads, it also reloads all extensions so they can pick up the environment
  // changes. If someone were to edit the .envrc with autosave on it would trigger
  // a lot reloads and probably make VS Code lag.
  "direnv.watchForChanges": false,

  // Configure efm-langserver
  "glspc.documentFilters": [{ "pattern": "**" }],
  "glspc.serverCommand": "efm-langserver",
  "glspc.serverCommandArguments": ["-c", ".efm-langserver.yaml"],
  "glspc.trace.server": "verbose",

  "nix.enableLanguageServer": true,
  "nix.serverPath": "nixd",
  "nix.serverSettings": {
    "nixd": {
      // Why I need this:
      // https://github.com/nix-community/nixd/blob/c38702b17580a31e84c958b5feed3d8c7407f975/nixd/docs/configuration.md#options-options
      "options": {
        "bigmac": {
          "expr": "(builtins.getFlake (toString ./.)).darwinConfigurations.bigmac.options",
        },
        "desktop": {
          "expr": "(builtins.getFlake (toString ./.)).homeConfigurations.desktop.options",
        },
        "flake-parts": {
          "expr": "(builtins.getFlake (toString ./.)).debug.options",
        },
        "flake-parts-per-system": {
          "expr": "(builtins.getFlake (toString ./.)).currentSystem.options",
        },
      },
    },
  },

  // I prefer Jedi since it's FOSS
  "python.languageServer": "Jedi",

  // It's faster
  "mypy-type-checker.preferDaemon": true,

  // To be consistent with the version of mypy we use locally and in CI
  "mypy-type-checker.importStrategy": "fromEnvironment",

  "mypy-type-checker.reportingScope": "workspace",

  // So the editor doesn't lag
  "go.lintFlags": ["--fast"],

  "go.lintTool": "golangci-lint",

  "ltex.completionEnabled": true,
  "ltex.enabled": [
    // This block of languages should contain all of the languages here:
    // https://github.com/valentjn/ltex-ls/blob/1193c9959aa87b3d36ca436060447330bf735a9d/src/main/kotlin/org/bsplines/ltexls/parsing/CodeFragmentizer.kt
    "bib",
    "bibtex",
    "html",
    "xhtml",
    "context",
    "context.tex",
    "latex",
    "plaintex",
    "rsweave",
    "tex",
    "markdown",
    "nop",
    "org",
    "restructuredtext",
  ],

  // Use our version for consistency
  "evenBetterToml.taplo.bundled": false,

  "files.associations": {
    ".envrc": "shellscript",
    "*.json5": "json5",
  },
}
