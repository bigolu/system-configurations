# The `excludes` and `includes` properties use PCRE2 regular expression
# syntax. The expressions are expected to match the entire path, as though the
# pattern is prefixed by '^' and suffixed by '$'.

global:
  # SYNC: GENERATED_FILES
  # The patterns are in PCRE2 regex syntax here, but the other sync blocks may
  # be using glob syntax
  excludes:
    - flake-modules/bundler/gozip/go.sum
    - flake-modules/bundler/gozip/gomod2nix.toml
    - .*\.lock
linters:
  renovate:
    command: renovate-config-validator
    options: [--strict]
    includes: [.*renovate\.json5]
  jq:
    command: bash
    # Source: https://github.com/jqlang/jq/issues/1539#issuecomment-1033002365
    options: [-euc, jq type "$@" 1>/dev/null, --]
    includes: [.*\.json]
    excludes: [.*\.vscode/.*\.json]
  statix:
    command: bash
    options:
      - -euc
      - |
        # statix doesn't support passing multiple files yet:
        # https://github.com/nerdypepper/statix/issues/70
        for file in "$@"; do
          statix check "$file"
        done
      - --
    includes: [.*\.nix]
  actionlint:
    command: actionlint
    includes: ["\\.github/workflows/.*\\.ya?ml"]
  taplo:
    command: taplo
    options: [lint]
    includes: [.*\.toml]
  yaml-lint:
    command: yamllint
    options: [--strict]
    includes: [".*\\.ya?ml"]
  shellcheck:
    command: shellcheck
    includes: [".*\\.(ba)?sh"]
  ltex-cli:
    command: ltex-cli
    options: [--server-command-line=ltex-ls]
    includes: [.*\.md]
  markdownlint-cli2:
    command: markdownlint-cli2
    includes: [.*\.md]
  desktop-file-validate:
    command: desktop-file-validate
    includes: [.*\.desktop]
  fish:
    command: bash
    options:
      - -euc
      - |
        # fish doesn't support passing multiple files, I should open an issue
        for file in "$@"; do
          fish --no-execute "$file"
        done
      - --
    includes: [.*\.fish]
